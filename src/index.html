<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NGM2</title>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-2">
                <!-- Blank Column -->
            </div>
            <div class="col-8">
                <nav class="navbar navbar-light">
                    <a class="navbar-brand" href="//bar.utoronto.ca/">
                        <img src="img/BAR.png" width="60" height="60" class="d-inline-block" alt="BAR Logo">
                        <img src="img/CanAgFuel_DB_logo_small.png" width="60" height="60" class="d-inline-block" alt="NGM Logo">
                        NGM - Next-generation EMS mutation mapping
                    </a>
                </nav>

                <!-- Navigation BAR -->
                <ul class="nav nav-pills nav-fill" id="main-tab" role="tablist">
                    <!-- Home Page Link -->
                    <li class="nav-item">
                        <a class="nav-link active" id="pills-home-tab" data-toggle="pill" role="tab" href="#pills-home" aria-controls="pills-home" aria-selected="true">Preprocess/Upload Data</a>
                    </li>
                    <!-- Chromosome Selection Link -->
                    <li class="nav-item">
                        <a class="nav-link disabled" id="pills-map-tab" data-toggle="pill" role="tab" href="#pills-map" aria-controls="pills-map" aria-selected="false">Map to Chromosome</a>
                    </li>
                    <!-- Mapping and fine tuning -->
                    <li class="nav-item">
                        <a class="nav-link disabled" id="pills-fine-map-tab" data-toggle="pill" role="tab" href="#pills-fine-map" aria-controls="pills-fine-map" aria-selected="false">Fine Map and Annotate</a>
                    </li>
                </ul>

                <!-- Pages for Navigation BAR -->
                <div class="tab-content" id="pills-tab-content">
                    <!-- Home page text -->
                    <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                        <br>
                        <!-- A Summary of how to use NGM -->
                        <h4>Welcome to the NGM homepage!</h4>
                        <p>
                            NGM allows for the rapid localization of recessive EMS induced mutations within an F2 mapping
                            population that has been pooled and sequenced en masse using a next-generation sequencing platform.
                        </p>
                        <h4>Introduction:</h4>
                        <p>
                            NGM will process an alignment (BAM format) of your F2 sequence data to your reference genome to
                            generate an NGM file for analysis. Once you have sequenced your pooled F2 population, map your
                            fastq data to the reference genome and upload your resulting BAM file in the "Upload Data" section below.
                        </p>
                        <h4>Notes:</h4>
                        <ol>
                            <li>We recommend <a href="https://sourceforge.net/projects/bio-bwa/files/">BWA</a> for mapping.</li>
                            <li>You can use our <a href="./bwaNGM">bwaNGM</a> script to simplify mapping with BWA.</li>
                            <li>If your BAM file is too large (>5Gb) or would prefer, you can use the <a href="./bam2ngm">
                                bam2ngm</a> script and upload the NGM file.</li>
                            <li>The bam2ngm script depends upon <a href="http://www.htslib.org/download/">bcftools</a> to run.</li>
                            <li>For mapping to Arabidopsis Columbia, the <a href="https://www.arabidopsis.org/download/index-auto.jsp?dir=%2Fdownload_files%2FGenes%2FTAIR10_genome_release%2FTAIR10_chromosome_files">
                                TAIR10_chr_all.fas</a> file should be used.</li>
                        </ol>
                        <h4>Upload data:</h4>
                        <form>
                            <input type="file" name="ngmFile">
                            <br>
                            Select gene reference you used for mapping:
                            <select name="reference" id="reference">
                                <optgroup label="Arabidopsis">
                                    <option value="Araport11" selected>Col-0 (Araport11)</option>
                                    <option value="TAIR10">Col-0 (TAIR10)</option>
                                    <option value="Ler0">Ler-0 (19 Genomes)</option>
                                    <option value="Ws">Ws-0 (19 Genomes)</option>
                                    <option value="C24">C24</option>
                                </optgroup>
                                <optgroup label="Other species">
                                    <option value="FlyBase">D. melanogaster (FlyBase)</option>
                                    <option value="SGD">S. cerevisiae (SGD)</option>
                                    <option value="GeneDB">S. pombe (GeneDB)</option>
                                    <option value="WormBase">C. elegans (WormBase)</option>
                                </optgroup>
                            </select>
                            <br>
                            <input type="button" name="upload" id="upload" value="Upload and analyse">
                            <input type="reset" name="upload-reset" id="upload-reset" value="Reset">
                        </form>
                        <hr>
                        Click <a href="description.html">here</a> for details on the application of NGM.<br>
                        Click <a href="FAQ.html">here</a> for the FAQ.<br>
                        Click <a href="quick.html">here</a> for the quick start guide.<br>
                    </div>
                    <!-- Chromosome Select page -->
                    <div class="tab-pane fade" id="pills-map" role="tabpanel" aria-labelledby="pills-map-tab">
                        <br>
                        <!-- A form to update histogram and move on to the next step -->
                        <form>
                            Session Id: <span id="session-id"></span><br>
                            Update bin size for histograms: <input type="text" name="histogram-size" id="histogram-size">
                            kb <input type="button" name="update-histogram" id="update-histogram" value="Update histogram">
                            <br><br>
                            Select chromosome for further exploration and <input type="button" name="submit-map" id="submit-map" value="Submit">
                            <hr>
                            <div id="chromosomes"></div>
                        </form>
                    </div>
                    <!-- Fine tunning page -->
                    <div class="tab-pane fade" id="pills-fine-map" role="tabpanel" aria-labelledby="pills-fine-map-tab">
                        This is the fine tuning page!
                    </div>
                </div>
            </div>

            <div class="col-2">
                <!-- Blank Column -->
            </div>
        </div>
    </div>
</body>
</html>
